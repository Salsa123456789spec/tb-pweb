<div class="container mx-auto p-4 sm:p-6 lg:p-8">
    <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-md p-6">
      <h1 class="text-2xl font-bold text-gray-800 mb-6">Edit Kelompok: <%= kelompok.nama %></h1>
  
      <form action="/aslab/kelompok/edit/<%= kelompok.id %>" method="POST" id="form-kelompok" class="space-y-6">
        <div>
          <label for="nama" class="block text-sm font-medium text-gray-700">Nama Kelompok</label>
          <input type="text" id="nama" name="nama" value="<%= kelompok.nama %>" required
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-yellow-500 focus:border-yellow-500" />
        </div>
  
        <div>
          <label for="deskripsi" class="block text-sm font-medium text-gray-700">Deskripsi (Opsional)</label>
          <textarea id="deskripsi" name="deskripsi" rows="3"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-yellow-500 focus:border-yellow-500"><%= kelompok.deskripsi || '' %></textarea>
        </div>
  
        <div>
          <label for="user_id" class="block text-sm font-medium text-gray-700">Pilih Mentor</label>
          <select id="user_id" name="user_id" required
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-white focus:ring-yellow-500 focus:border-yellow-500">
            <option value="" disabled>-- Pilih seorang mentor --</option>
            <% mentors.forEach(mentor => { %>
              <option value="<%= mentor.id %>" <%= mentor.id === kelompok.user_id ? 'selected' : '' %>><%= mentor.name %> (<%= mentor.no_aslab %>)</option>
            <% }) %>
          </select>
        </div>
  
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Anggota (Maksimal 4)</label>
          <% if (members.length > 0) { %>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <% members.forEach(member => { %>
                <label class="inline-flex items-center space-x-2">
                  <input type="checkbox" name="anggota" value="<%= member.id %>" id="member_<%= member.id %>"
                    class="rounded border-gray-300 text-yellow-500 focus:ring-yellow-500"
                    <%= currentMemberIds.includes(member.id) ? 'checked' : '' %>>
                  <span class="text-sm text-gray-700"><%= member.user.name %> (<%= member.user.nim %>)</span>
                </label>
              <% }) %>
            </div>
          <% } else { %>
            <p class="text-gray-500">Tidak ada mahasiswa yang tersedia.</p>
          <% } %>
        </div>
  
        <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
          <a href="/aslab/kelompok"
            class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-md transition">Batal</a>
          <button type="submit"
            class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md transition">Update</button>
        </div>
      </form>
    </div>
  </div>
  
  <script>
    document.getElementById('form-kelompok').addEventListener('submit', function (e) {
      const checkboxes = document.querySelectorAll('input[name="anggota"]:checked');
      if (checkboxes.length > 4) {
        alert('Error: Anda hanya dapat memilih maksimal 4 anggota.');
        e.preventDefault();
      }
    });
  </script>
  