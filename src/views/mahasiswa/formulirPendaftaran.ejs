<div class="px-6 pb-8" id="formPendaftaran">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">Open Recruitment Asisten LEA</h1>

  <form method="POST" action="/mahasiswa/formulirPendaftaran" enctype="multipart/form-data">
    <div class="space-y-5">
   <!-- Email -->
<!-- Email -->
<div>
  <label class="block text-gray-700 mb-2">Email <span class="text-red-500">*</span></label>
  <input name="email" type="email" value="<%= user.email %>" readonly
         class="w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 pointer-events-none">
</div>

<!-- NIM -->
<div>
  <label class="block text-gray-700 mb-2">NIM <span class="text-red-500">*</span></label>
  <input name="nim" type="text" value="<%= user.nim %>" readonly
         class="w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 pointer-events-none">
</div>

<!-- Nama -->
<div>
  <label class="block text-gray-700 mb-2">Nama <span class="text-red-500">*</span></label>
  <input name="name" type="text" value="<%= user.name %>" readonly
         class="w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 pointer-events-none">
</div>






      <!-- Domisili -->
      <div>
        <label class="block text-gray-700 mb-2">Alamat Domisili <span class="text-red-500">*</span></label>
        <input name="domisili" type="text" placeholder="Masukkan Alamat Domisili" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
      </div>

      <!-- Asal -->
      <div>
        <label class="block text-gray-700 mb-2">Asal <span class="text-red-500">*</span></label>
        <input name="asal" type="text" placeholder="Masukkan Asal" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
      </div>

      <!-- No HP -->
      <div>
        <label class="block text-gray-700 mb-2">No.Hp/WhatsApp <span class="text-red-500">*</span></label>
        <input name="nomor_whatsapp" type="text" placeholder="Masukkan No.Hp/WhatsApp" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
      </div>
<!-- Divisi -->
<div>
  <label class="block text-gray-700 mb-2">Divisi Yang Ingin Diikuti di LEA <span class="text-red-500">*</span></label>
  <div id="divisiOptions" class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <label class="divisi-card border border-gray-300 rounded-lg p-4 text-center cursor-pointer transition">
      <input type="checkbox" name="divisi[]" value="Penelitian & Pengembangan" class="sr-only">
      <img src="/img/litbang.png" alt="Icon Penelitian dan Pengembangan" class="mx-auto mb-2">
      <p class="text-sm font-medium">Penelitian & Pengembangan</p>
    </label>

    <label class="divisi-card border border-gray-300 rounded-lg p-4 text-center cursor-pointer transition">
      <input type="checkbox" name="divisi[]" value="Pengabdian Masyarakat" class="sr-only">
      <img src="/img/pengmas2.png" alt="Icon Pengabdian Masyarakat" class="mx-auto mb-2">
      <p class="text-sm font-medium">Pengabdian Masyarakat</p>
    </label>

    <label class="divisi-card border border-gray-300 rounded-lg p-4 text-center cursor-pointer transition">
      <input type="checkbox" name="divisi[]" value="Rumah Tangga" class="sr-only">
      <img src="/img/rtk.png" alt="Icon Rumah Tangga" class="mx-auto mb-2">
      <p class="text-sm font-medium">Rumah Tangga</p>
    </label>
  </div>
  <p class="text-xs text-gray-500 mt-2">*Pilih maksimal 2</p>
</div>

<!-- Script -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const labels = document.querySelectorAll('.divisi-card');

    labels.forEach(label => {
      const checkbox = label.querySelector('input[type="checkbox"]');

      checkbox.addEventListener('change', () => {
        const checkedBoxes = document.querySelectorAll('input[name="divisi[]"]:checked');

        // Batasi pilihan maksimal 2
        if (checkedBoxes.length > 2) {
          checkbox.checked = false;
          return alert("Maksimal 2 divisi yang bisa dipilih.");
        }

        // Update style
        labels.forEach(lbl => {
          const cb = lbl.querySelector('input[type="checkbox"]');
          lbl.classList.toggle('border-green-500', cb.checked);
          lbl.classList.toggle('bg-green-100', cb.checked);
        });
      });
    });
  });
</script>


      <!-- Upload CV -->
      <!-- Upload CV -->
<!-- <div>
  <label class="block text-gray-700 mb-2">Upload CV <span class="text-red-500">*</span></label>
  <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
    <input id="cvFile" name="CV_file" type="file" required class="hidden">
    <p class="text-gray-500 mb-2">drag and drop file here or</p>
    <button type="button" onclick="document.getElementById('cvFile').click()" class="px-4 py-2 bg-white border border-gray-300 rounded-md text-sm">Browse Files</button>
    <p id="cvName" class="text-sm text-green-600 mt-2"></p>
  </div>
</div> -->
<!-- Upload CV -->
<!-- Formulir Pendaftaran Asisten LEA -->
<div class="px-6 pb-8" id="formPendaftaran">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">Open Recruitment Asisten LEA</h1>

  <form method="POST" action="/mahasiswa/formulirPendaftaran" enctype="multipart/form-data">
    <div class="space-y-5">
      <!-- Input data pribadi -->
      <!-- ... Email, NIM, Nama, Domisili, Asal, No HP (sama seperti sebelumnya) -->

      <!-- Upload CV -->
      <div>
        <label class="block text-gray-700 mb-2">Upload CV <span class="text-red-500">*</span></label>
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
          <input id="cvFile" name="CV_file" type="file" required class="hidden">
          <p class="text-gray-500 mb-2">drag and drop file here or</p>
          <button type="button" onclick="document.getElementById('cvFile').click()" class="px-4 py-2 bg-white border border-gray-300 rounded-md text-sm">Browse Files</button>
          <div class="file-preview" id="cvPreview" style="display: none; justify-content: center; align-items: center; gap: 8px;">
            <img id="cvIcon" src="" alt="icon" class="inline-block w-5 h-5 mr-1">
            <a id="cvLink" class="text-sm text-green-600 underline" target="_blank"></a>
          </div>
        </div>
      </div>

      <!-- Upload KRS -->
      <div>
        <label class="block text-gray-700 mb-2">Upload KRS <span class="text-red-500">*</span></label>
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
          <input id="krsFile" name="KRS_file" type="file" required class="hidden">
          <p class="text-gray-500 mb-2">drag and drop file here or</p>
          <button type="button" onclick="document.getElementById('krsFile').click()" class="px-4 py-2 bg-white border border-gray-300 rounded-md text-sm">Browse Files</button>
          <div class="file-preview" id="krsPreview" style="display: none; justify-content: center; align-items: center; gap: 8px;">
            <img id="krsIcon" src="" alt="icon" class="inline-block w-5 h-5 mr-1">
            <a id="krsLink" class="text-sm text-green-600 underline" target="_blank"></a>
          </div>
        </div>
      </div>

      <!-- Upload KHS -->
      <div>
        <label class="block text-gray-700 mb-2">Upload KHS <span class="text-red-500">*</span></label>
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
          <input id="khsFile" name="KHS_file" type="file" required class="hidden">
          <p class="text-gray-500 mb-2">drag and drop file here or</p>
          <button type="button" onclick="document.getElementById('khsFile').click()" class="px-4 py-2 bg-white border border-gray-300 rounded-md text-sm">Browse Files</button>
          <div class="file-preview" id="khsPreview" style="display: none; justify-content: center; align-items: center; gap: 8px;">
            <img id="khsIcon" src="" alt="icon" class="inline-block w-5 h-5 mr-1">
            <a id="khsLink" class="text-sm text-green-600 underline" target="_blank"></a>
          </div>
        </div>
      </div>

      <!-- Upload Surat Permohonan -->
      <div>
        <label class="block text-gray-700 mb-2">Surat Permohonan</label>
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
          <input id="suratFile" name="surat_permohonan_file" type="file" class="hidden">
          <p class="text-gray-500 mb-2">drag and drop file here or</p>
          <button type="button" onclick="document.getElementById('suratFile').click()" class="px-4 py-2 bg-white border border-gray-300 rounded-md text-sm">Browse Files</button>
          <div class="file-preview" id="suratPreview" style="display: none; justify-content: center; align-items: center; gap: 8px;">
            <img id="suratIcon" src="" alt="icon" class="inline-block w-5 h-5 mr-1">
            <a id="suratLink" class="text-sm text-green-600 underline" target="_blank"></a>
          </div>
        </div>
      </div>

      <!-- Lainnya (alasan, pernyataan, submit) -->
        <!-- Alasan -->
      <div>
        <label class="block text-gray-700 mb-2">Kenapa Kamu Mendaftar?</label>
        <textarea name="alasan" rows="4" placeholder="Tuliskan alasan kamu mendaftar..." class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
      </div>
      <!-- ... -->
        <div>
        <label class="flex items-center">
          <input name="pernyataan" type="checkbox" required class="h-4 w-4 text-green-500 border-gray-300 rounded focus:ring-green-500">
          <span class="ml-2 text-gray-700">Saya menyatakan data yang saya isi adalah benar <span class="text-red-500">*</span></span>
        </label>
      </div>

       <!-- Submit -->
      <div class="flex justify-end">
        <button type="submit" class="px-6 py-3 bg-green-500 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition duration-300">Submit</button>
      </div>
    </div>
  </form>
</div>
    </div>
  </form>
</div>

<script>
  function getFileIcon(extension) {
    const ext = extension.toLowerCase();
    if (ext === 'pdf') return 'https://cdn-icons-png.flaticon.com/512/337/337946.png';
    if (ext === 'doc' || ext === 'docx') return 'https://cdn-icons-png.flaticon.com/512/281/281760.png';
    if (ext === 'jpg' || ext === 'jpeg' || ext === 'png') return 'https://cdn-icons-png.flaticon.com/512/337/337948.png';
    return 'https://cdn-icons-png.flaticon.com/512/109/109612.png'; // generic file
  }

  function setupFilePreview(inputId, previewId, iconId, linkId) {
    const input = document.getElementById(inputId);
    const preview = document.getElementById(previewId);
    const icon = document.getElementById(iconId);
    const link = document.getElementById(linkId);

    input.addEventListener('change', function () {
      if (input.files.length > 0) {
        const file = input.files[0];
        const fileURL = URL.createObjectURL(file);
        const extension = file.name.split('.').pop();

        icon.src = getFileIcon(extension);
        icon.alt = extension + ' icon';
        link.href = fileURL;
        link.textContent = file.name;
        preview.style.display = 'flex';
      } else {
        icon.src = '';
        link.textContent = '';
        link.removeAttribute('href');
        preview.style.display = 'none';
      }
    });
  }

  document.addEventListener('DOMContentLoaded', () => {
    setupFilePreview('cvFile', 'cvPreview', 'cvIcon', 'cvLink');
    setupFilePreview('krsFile', 'krsPreview', 'krsIcon', 'krsLink');
    setupFilePreview('khsFile', 'khsPreview', 'khsIcon', 'khsLink');
    setupFilePreview('suratFile', 'suratPreview', 'suratIcon', 'suratLink');
  });
</script>
