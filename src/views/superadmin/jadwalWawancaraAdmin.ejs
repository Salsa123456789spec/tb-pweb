<header class="flex justify-between items-center mb-6">
    <h1 class="font-bold text-lg md:text-xl lg:text-2xl underline">
        Penjadwalan Wawancara - Admin
    </h1>
    <div class="flex items-center gap-2 text-black font-normal text-base md:text-lg">
        <span>
            Admin
        </span>
        <div aria-label="User profile icon with green background"
            class="w-10 h-10 rounded-full bg-green-700 flex items-center justify-center">
            <i class="fas fa-user text-white text-lg">
            </i>
        </div>
    </div>
</header>

<!-- Flash Messages -->
<% if (typeof success_msg !== 'undefined' && success_msg.length > 0) { %>
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
        <%= success_msg %>
    </div>
<% } %>

<% if (typeof error_msg !== 'undefined' && error_msg.length > 0) { %>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <%= error_msg %>
    </div>
<% } %>

<!-- Error Messages -->
<% if (typeof errors !== 'undefined' && errors.length > 0) { %>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <% errors.forEach(function(error) { %>
            <p><%= error.msg %></p>
        <% }); %>
    </div>
<% } %>

<!-- Form container -->
<section aria-label="Buat Jadwal Wawancara form"
    class="border border-green-700 rounded-md p-4 max-w-3xl w-full mb-8">
    <form class="space-y-4 text-xs md:text-sm" method="POST" action="/superadmin/jadwalWawancara">
        <div>
            <label class="block font-semibold mb-1" for="peserta_id">
                Buat Jadwal Wawancara
            </label>
            <label class="block mb-1 font-semibold" for="peserta_id">
                Peserta*
            </label>
            <select aria-describedby="pesertaHelp"
                class="w-full border border-green-700 rounded-sm text-xs md:text-sm p-1 pl-2 appearance-none bg-white relative"
                id="peserta_id" name="peserta_id" required>
                <option value="" disabled selected>
                    Pilih Peserta Berdasarkan NIM
                </option>
                <option value="revin-123456789" 
                        <%= (typeof old !== 'undefined' && old.peserta_id === 'revin-123456789') ? 'selected' : '' %>
                        class="bg-green-200">
                    Revin - 123456789 - Rumah Tangga
                </option>
                <option value="aldi-987654321" 
                        <%= (typeof old !== 'undefined' && old.peserta_id === 'aldi-987654321') ? 'selected' : '' %>
                        class="bg-green-200">
                    Aldi - 987654321 - Pengmas
                </option>
                <option value="levi-456789123" 
                        <%= (typeof old !== 'undefined' && old.peserta_id === 'levi-456789123') ? 'selected' : '' %>
                        class="bg-green-200">
                    Levi - 456789123 - Litbang
                </option>
                <option value="sarah-789123456" 
                        <%= (typeof old !== 'undefined' && old.peserta_id === 'sarah-789123456') ? 'selected' : '' %>
                        class="bg-green-200">
                    Sarah - 789123456 - RTK
                </option>
            </select>
        </div>
        <div>
            <label class="block font-semibold mb-1" for="pewawancara_id">
                Pewawancara*
            </label>
            <select
                class="w-full border border-green-700 rounded-sm text-xs md:text-sm p-1 pl-2 appearance-none bg-white relative"
                id="pewawancara_id" name="pewawancara_id" required>
                <option value="" disabled selected>
                    Pilih Aslab
                </option>
                <option value="Zahra" 
                        <%= (typeof old !== 'undefined' && old.pewawancara_id === 'Zahra') ? 'selected' : '' %>
                        class="bg-green-200">
                    Zahra
                </option>
                <option value="Salsa" 
                        <%= (typeof old !== 'undefined' && old.pewawancara_id === 'Salsa') ? 'selected' : '' %>
                        class="bg-green-200">
                    Salsa
                </option>
                <option value="Astu" 
                        <%= (typeof old !== 'undefined' && old.pewawancara_id === 'Astu') ? 'selected' : '' %>
                        class="bg-green-200">
                    Astu
                </option>
            </select>
        </div>
        <div>
            <label class="block font-semibold mb-1" for="tanggal_wawancara">
                Tanggal Wawancara*
            </label>
            <input class="w-full border border-green-700 rounded-sm p-1 text-xs md:text-sm" id="tanggal_wawancara"
                name="tanggal_wawancara" type="date" 
                value="<%= typeof old !== 'undefined' && old.tanggal_wawancara ? old.tanggal_wawancara : '' %>"
                required />
        </div>
        <div class="flex flex-wrap gap-2 items-center">
            <label class="font-semibold" for="waktu_wawancara_mulai">
                Waktu Wawancara*
            </label>
            <input class="border border-green-700 rounded-sm p-1 w-16 text-xs md:text-sm" id="waktu_wawancara_mulai"
                name="waktu_wawancara_mulai" type="time" 
                value="<%= typeof old !== 'undefined' && old.waktu_wawancara_mulai ? old.waktu_wawancara_mulai : '' %>"
                required />
            <span class="font-semibold">
                s/d
            </span>
            <input class="border border-green-700 rounded-sm p-1 w-16 text-xs md:text-sm" id="waktu_wawancara_selesai"
                name="waktu_wawancara_selesai" type="time" 
                value="<%= typeof old !== 'undefined' && old.waktu_wawancara_selesai ? old.waktu_wawancara_selesai : '' %>"
                required />
        </div>
        <div>
            <label class="block font-semibold mb-1" for="lokasi_wawancara">
                Lokasi Wawancara*
            </label>
            <input class="w-full border border-green-700 rounded-sm p-1 text-xs md:text-sm" id="lokasi_wawancara"
                name="lokasi_wawancara" placeholder="Masukkan Lokasi Wawancara" type="text" 
                value="<%= typeof old !== 'undefined' && old.lokasi_wawancara ? old.lokasi_wawancara : '' %>"
                required />
        </div>
        <div class="flex gap-3">
            <button
                class="bg-green-600 text-white font-semibold rounded px-4 py-1 text-xs md:text-sm tracking-widest"
                type="submit">
                Simpan
            </button>
            <button type="button" onclick="resetForm()" class="bg-green-800 text-white font-semibold rounded px-4 py-1 text-xs md:text-sm">
                + Tambah
            </button>
        </div>
    </form>
</section>

<!-- Jadwal Wawancara Terbaru -->
<section class="max-w-3xl w-full space-y-4">
    <h2 class="font-semibold text-sm md:text-base mb-2">
        Jadwal Wawancara Terkini
    </h2>
    <p class="text-gray-500 text-xs md:text-sm mb-2">
        Berikut adalah jadwal wawancara terbaru yang telah dijadwalkan.
    </p>
    
    <% if (typeof jadwalWawancaraList !== 'undefined' && jadwalWawancaraList.length > 0) { %>
        <% jadwalWawancaraList.forEach(function(jadwal) { %>
            <article
                class="flex flex-col md:flex-row items-start md:items-center bg-gray-100 rounded-lg shadow-md border border-gray-300 p-4 md:p-5 gap-3 md:gap-6">
                <div class="flex flex-col md:flex-row md:items-center gap-2 md:gap-4 flex-1 md:flex-none">
                    <h3 class="font-semibold text-sm md:text-base">
                        <% if (jadwal.pendaftaran && jadwal.pendaftaran.user) { %>
                            <%= jadwal.pendaftaran.user.name %> - <%= jadwal.pendaftaran.divisi %>
                        <% } else { %>
                            Test User - Test Divisi
                        <% } %>
                    </h3>
                    <p class="text-xs md:text-sm text-gray-700">
                        <%= jadwal.pewawancara %>
                    </p>
                </div>
                <div class="flex items-center gap-1 text-xs md:text-sm text-gray-600 whitespace-nowrap">
                    <i class="far fa-calendar-alt">
                    </i>
                    <span>
                        <%= new Date(jadwal.tanggal).toLocaleDateString('id-ID', { 
                            day: 'numeric', 
                            month: 'long', 
                            year: 'numeric' 
                        }) %>
                    </span>
                </div>
                <div class="flex items-center gap-1 text-xs md:text-sm text-green-700 whitespace-nowrap">
                    <i class="far fa-clock">
                    </i>
                    <span>
                        <%= new Date(jadwal.waktu).toLocaleTimeString('id-ID', { 
                            hour: '2-digit', 
                            minute: '2-digit' 
                        }) %>
                    </span>
                </div>
                <div class="flex items-center gap-1 text-xs md:text-sm text-gray-600 whitespace-nowrap">
                    <i class="fas fa-door-open">
                    </i>
                    <span>
                        <%= jadwal.ruang %>
                    </span>
                </div>
                <div class="flex gap-2">
                    <button
                        class="bg-yellow-400 text-black text-[9px] md:text-xs font-semibold rounded px-2 py-0.5 self-start md:self-auto">
                        Ubah Jadwal
                    </button>
                    <button
                        class="bg-red-500 text-white text-[9px] md:text-xs font-semibold rounded px-2 py-0.5 self-start md:self-auto">
                        Hapus
                    </button>
                </div>
            </article>
        <% }); %>
    <% } else { %>
        <div class="bg-gray-100 rounded-lg p-6 text-center">
            <p class="text-gray-500 text-sm">Belum ada jadwal wawancara yang dijadwalkan.</p>
        </div>
    <% } %>
</section>

<script>
function resetForm() {
    document.getElementById('peserta_id').value = '';
    document.getElementById('pewawancara_id').value = '';
    document.getElementById('tanggal_wawancara').value = '';
    document.getElementById('waktu_wawancara_mulai').value = '';
    document.getElementById('waktu_wawancara_selesai').value = '';
    document.getElementById('lokasi_wawancara').value = '';
}
</script> 